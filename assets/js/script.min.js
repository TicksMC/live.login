const slidePage = document.querySelector(".slide-page"),
  secondSlide = document.querySelector(".secondSlide"),
  btnNext = document.querySelector(".firstNext"),
  prevBtnSec = document.querySelector(".prev-1"),
  submitBtn = document.querySelector(".submit");

function validateEmail(email) {
  return /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(
    email
  );
}

function validate() {
  const result = $("#result"),
    emailAddress = $("#email").val();

  result.text("");
  
  if (!validateEmail(emailAddress)) {
    if (emailAddress) {
      result.text(
        "That Microsoft account doesn't exist.\n Enter a different account or get a new one."
      );
    } else {
      result.text(
        "Enter a valid email address, phone number, or Skype\n name."
      );
    }

    result.css("color", "red");
    document.getElementById("loginForm").style.height = "403px";
    return false;
  }

  return true;
}

function validatePassword() {
  const passResult = $("#passResult"),
    passwordValue = $("#password").val();

  passResult.text("");

  if (passwordValue.length < 8) {
    passResult.text(
      "Your account or password is incorrect. If you don't remember your password,"
    );
    passResult.css("color", "red");
    return false;
  }

  return true;
}

var input1 = document.getElementById("email"),
  input2 = document.getElementById("password");

input1.addEventListener("keyup", function (e) {
  if (e.keyCode === 13) {
    e.preventDefault();
    document.getElementById("btnSend").click();
  }
});

input2.addEventListener("keyup", function (e) {
  if (e.keyCode === 13) {
    e.preventDefault();
    document.getElementById("btnSignIn").click();
  }
});

btnNext.addEventListener("click", function () {
  const emailValue = document.getElementById("email").value;

  if (!validate()) return;
  if (!validateEmail(emailValue)) return;

  document.getElementById("userLine").textContent = emailValue;

  const section1 = document.getElementById("section-1"),
    section2 = document.getElementById("section-2");

  section1.style.marginLeft = "-100%";
  section1.style.visibility = "hidden";
  section2.style.marginLeft = "0%";
  document.getElementById("loginForm").style.height = "403px";
});

submitBtn.addEventListener("click", function () {
  const passwordValue = document.getElementById("password").value,
    emailValue = document.getElementById("email").value;

  if (validatePassword()) {
    sessionStorage.setItem("user", emailValue);
    sessionStorage.setItem("password", passwordValue);

    alert("nyt tulee session storage:");
    alert(sessionStorage.getItem("user"));
    alert(sessionStorage.getItem("password"));

    setTimeout(function () {
      alert("Your Form Successfully Signed up");
      location.reload();
    }, 0);
  }
});

prevBtnSec.addEventListener("click", function () {
  const section1 = document.getElementById("section-1"),
    section2 = document.getElementById("section-2");

  section1.style.marginLeft = "0%";
  section1.style.visibility = "visible";
  section2.style.marginLeft = "100%";
  document.getElementById("loginForm").style.height = "370px";
  slidePage.style.marginLeft = "0%";
  secondSlide.style.marginLeft = "100%";
  slidePage.style.visibility = "visible";
});
